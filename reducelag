-- Rendering Toggle Script with GUI Button
-- Run this via executor or place in StarterPlayerScripts

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local renderingEnabled = true

-- Create GUI
local function createToggleButton()
	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = "RenderingToggle"
	screenGui.ResetOnSpawn = false
	screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	
	-- Make sure it stays on top
	pcall(function()
		screenGui.Parent = game:GetService("CoreGui")
	end)
	
	-- Fallback to PlayerGui if CoreGui fails
	if not screenGui.Parent then
		screenGui.Parent = player:WaitForChild("PlayerGui")
	end
	
	-- Main button frame
	local button = Instance.new("TextButton")
	button.Name = "RenderToggleButton"
	button.Size = UDim2.new(0, 180, 0, 50)
	button.Position = UDim2.new(1, -190, 0, 10)
	button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	button.BorderSizePixel = 2
	button.BorderColor3 = Color3.fromRGB(0, 255, 0)
	button.Font = Enum.Font.GothamBold
	button.TextSize = 16
	button.TextColor3 = Color3.fromRGB(255, 255, 255)
	button.Text = "ðŸŽ¥ Rendering: ON"
	button.AutoButtonColor = false
	button.Parent = screenGui
	
	-- Add rounded corners
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 8)
	corner.Parent = button
	
	-- Add shadow effect
	local shadow = Instance.new("Frame")
	shadow.Name = "Shadow"
	shadow.Size = UDim2.new(1, 4, 1, 4)
	shadow.Position = UDim2.new(0, -2, 0, 2)
	shadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	shadow.BackgroundTransparency = 0.7
	shadow.ZIndex = button.ZIndex - 1
	shadow.BorderSizePixel = 0
	shadow.Parent = button
	
	local shadowCorner = Instance.new("UICorner")
	shadowCorner.CornerRadius = UDim.new(0, 8)
	shadowCorner.Parent = shadow
	
	-- Status indicator
	local indicator = Instance.new("Frame")
	indicator.Name = "Indicator"
	indicator.Size = UDim2.new(0, 10, 0, 10)
	indicator.Position = UDim2.new(0, 10, 0.5, -5)
	indicator.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
	indicator.BorderSizePixel = 0
	indicator.Parent = button
	
	local indicatorCorner = Instance.new("UICorner")
	indicatorCorner.CornerRadius = UDim.new(1, 0)
	indicatorCorner.Parent = indicator
	
	return screenGui, button, indicator
end

-- Toggle rendering function
local function toggleRendering()
	renderingEnabled = not renderingEnabled
	
	pcall(function()
		RunService:Set3dRenderingEnabled(renderingEnabled)
	end)
	
	return renderingEnabled
end

-- Update button appearance
local function updateButton(button, indicator, enabled)
	if enabled then
		button.Text = "ðŸŽ¥ Rendering: ON"
		button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		button.BorderColor3 = Color3.fromRGB(0, 255, 0)
		indicator.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
	else
		button.Text = "ðŸŽ¥ Rendering: OFF"
		button.BackgroundColor3 = Color3.fromRGB(60, 20, 20)
		button.BorderColor3 = Color3.fromRGB(255, 0, 0)
		indicator.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
	end
end

-- Add hover effect
local function addHoverEffect(button)
	button.MouseEnter:Connect(function()
		button.BackgroundTransparency = 0.2
	end)
	
	button.MouseLeave:Connect(function()
		button.BackgroundTransparency = 0
	end)
end

-- Initialize
local screenGui, button, indicator = createToggleButton()
addHoverEffect(button)

-- Button click event
button.MouseButton1Click:Connect(function()
	local enabled = toggleRendering()
	updateButton(button, indicator, enabled)
	
	-- Play click sound
	local sound = Instance.new("Sound")
	sound.SoundId = "rbxasset://sounds/button.wav"
	sound.Volume = 0.5
	sound.Parent = screenGui
	sound:Play()
	game:GetService("Debris"):AddItem(sound, 1)
	
	-- Visual feedback
	local originalSize = button.Size
	button.Size = UDim2.new(0, 175, 0, 48)
	wait(0.1)
	button.Size = originalSize
end)

-- Disable rendering on start
wait(0.5) -- Small delay to ensure everything loads
renderingEnabled = toggleRendering()
updateButton(button, indicator, renderingEnabled)

print("Rendering Toggle loaded!")
print("Rendering is now DISABLED - Click the button in the top-right to enable it")
print("Memory saved by disabling 3D rendering!")
