-- Auto Clicker Script with GUI Toggle
-- Clicks at top-right corner with 30px offset to the left

local VIM = game:GetService("VirtualInputManager")
local Players = game:GetService("Players")
local Camera = workspace.CurrentCamera

-- Variables
local clicking = false
local clickLoop = nil

-- Get screen size
local function getScreenSize()
    return Camera.ViewportSize
end

-- Calculate click position (top-right with 30px left offset)
local function getClickPosition()
    local screenSize = getScreenSize()
    local x = screenSize.X - 30  -- 30 pixels from right edge
    local y = 30                  -- 30 pixels from top
    return x, y
end

-- Simulate a click at position
local function clickAt(x, y)
    VIM:SendMouseButtonEvent(x, y, 0, true, game, 0)  -- Mouse down
    task.wait(0.05)
    VIM:SendMouseButtonEvent(x, y, 0, false, game, 0) -- Mouse up
end

-- Start clicking loop
local function startClicking()
    clicking = true
    clickLoop = task.spawn(function()
        while clicking do
            local x, y = getClickPosition()
            clickAt(x, y)
            task.wait(0.5)  -- Wait 0.5 seconds between clicks
        end
    end)
end

-- Stop clicking loop
local function stopClicking()
    clicking = false
    if clickLoop then
        task.cancel(clickLoop)
        clickLoop = nil
    end
end

-- Create GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoClickerGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 100)
frame.Position = UDim2.new(0.5, -100, 0.5, -50)
frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
frame.BorderSizePixel = 0
frame.Parent = screenGui

-- Add rounded corners
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

-- Title Label
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Auto Clicker"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 16
title.Font = Enum.Font.GothamBold
title.Parent = frame

-- Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, -20, 0, 20)
statusLabel.Position = UDim2.new(0, 10, 0, 35)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Stopped"
statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
statusLabel.TextSize = 14
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Parent = frame

-- Toggle Button
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 160, 0, 35)
toggleButton.Position = UDim2.new(0.5, -80, 1, -45)
toggleButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
toggleButton.BorderSizePixel = 0
toggleButton.Text = "Start Clicking"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.TextSize = 14
toggleButton.Font = Enum.Font.GothamBold
toggleButton.Parent = frame

-- Button corner
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = toggleButton

-- Toggle button functionality
toggleButton.MouseButton1Click:Connect(function()
    if clicking then
        -- Stop clicking
        stopClicking()
        toggleButton.Text = "Start auto clickr"
        toggleButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        statusLabel.Text = "Status: Stopped"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    else
        -- Start clicking
        startClicking()
        toggleButton.Text = "Stop auto clickr"
        toggleButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
        statusLabel.Text = "Status: Clicking"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        -- Show where it's clicking
        local x, y = getClickPosition()
        print(string.format("Clicking at position: X=%d, Y=%d", x, y))
    end
end)

-- Make GUI draggable
local dragging = false
local dragInput, mousePos, framePos

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        mousePos = input.Position
        framePos = frame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - mousePos
        frame.Position = UDim2.new(
            framePos.X.Scale,
            framePos.X.Offset + delta.X,
            framePos.Y.Scale,
            framePos.Y.Offset + delta.Y
        )
    end
end)

-- Cleanup on script end
screenGui.Destroying:Connect(function()
    stopClicking()
end)

print("Auto Clicker loaded! Click the button to start/stop clicking.")
print("Clicking at top-right corner (30px from right, 30px from top)")
