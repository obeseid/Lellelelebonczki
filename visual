-- LocalScript: Clone ItemFrame into each eligible CategoryContainer list

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Wait for Menus ScreenGui
local menus = player:WaitForChild("PlayerGui"):WaitForChild("Menus")
if not menus:IsA("ScreenGui") then
	warn("Menus is not a ScreenGui!")
	return
end

-- Wait for Backpack frame
local backpack = menus:WaitForChild("Backpack")
if not backpack:IsA("Frame") then
	warn("Backpack is not a Frame!")
	return
end

-- Wait for Inventory.Content.List
local inventory = backpack:WaitForChild("Inventory")
local content = inventory:WaitForChild("Content")
local mainList = content:WaitForChild("List")

-- Grab ItemFrame template from InventoryMenu module
local invModuleScript = player:WaitForChild("PlayerScripts")
	:WaitForChild("Secondary")
	:WaitForChild("InventoryMenu")
local itemTemplate = invModuleScript:WaitForChild("ItemFrame")

-- Loop through all CategoryContainers
for _, category in ipairs(mainList:GetChildren()) do
	if category:IsA("Frame") then
		-- Check if the category has its own List frame
		local catList = category:FindFirstChild("List")
		if catList and catList:IsA("Frame") then
			-- Only clone if catList has at least one TextButton
			local hasButton = false
			for _, child in ipairs(catList:GetChildren()) do
				if child:IsA("TextButton") then
					hasButton = true
					break
				end
			end

			if hasButton then
				-- Clone the ItemFrame into this list
				local clone = itemTemplate:Clone()
				clone.Name = "ItemFrame_Test"
				clone.Parent = catList

				-- Update NameLabel
				local nameLabel = clone:FindFirstChild("NameLabel")
				if nameLabel and nameLabel:IsA("TextLabel") then
					nameLabel.Text = "Friesian Horse (v1)"
				end
			end
		end
	end
end

print("âœ… Cloned ItemFrame into eligible CategoryContainer lists!")
