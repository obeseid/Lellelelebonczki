-- DataStore Save Blocker dildo
-- Execute this script with Delta

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "DataStoreBlockerGUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Try to parent to CoreGui, fallback to PlayerGui
local success = pcall(function()
    screenGui.Parent = CoreGui
end)
if not success then
    screenGui.Parent = playerGui
end

-- Create Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Add corner radius
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = mainFrame

-- Create Title
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, -20, 0, 40)
title.Position = UDim2.new(0, 10, 0, 10)
title.BackgroundTransparency = 1
title.Text = "DataStore Blocker"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 18
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = mainFrame

-- Create Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(1, -20, 0, 30)
statusLabel.Position = UDim2.new(0, 10, 0, 55)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Not Active"
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.TextSize = 14
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Parent = mainFrame

-- Create Blocked Counter Label
local blockedLabel = Instance.new("TextLabel")
blockedLabel.Name = "BlockedLabel"
blockedLabel.Size = UDim2.new(1, -20, 0, 30)
blockedLabel.Position = UDim2.new(0, 10, 0, 85)
blockedLabel.BackgroundTransparency = 1
blockedLabel.Text = "Blocked Saves: 0"
blockedLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
blockedLabel.TextSize = 16
blockedLabel.Font = Enum.Font.GothamBold
blockedLabel.TextXAlignment = Enum.TextXAlignment.Left
blockedLabel.Visible = false
blockedLabel.Parent = mainFrame

-- Create Last Blocked Info Label
local lastBlockedLabel = Instance.new("TextLabel")
lastBlockedLabel.Name = "LastBlockedLabel"
lastBlockedLabel.Size = UDim2.new(1, -20, 0, 25)
lastBlockedLabel.Position = UDim2.new(0, 10, 0, 115)
lastBlockedLabel.BackgroundTransparency = 1
lastBlockedLabel.Text = "Last: None"
lastBlockedLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
lastBlockedLabel.TextSize = 11
lastBlockedLabel.Font = Enum.Font.Gotham
lastBlockedLabel.TextXAlignment = Enum.TextXAlignment.Left
lastBlockedLabel.Visible = false
lastBlockedLabel.Parent = mainFrame

-- Create Toggle Button
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 260, 0, 40)
toggleButton.Position = UDim2.new(0, 20, 0, 150)
toggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
toggleButton.Text = "Block Saves"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.TextSize = 16
toggleButton.Font = Enum.Font.GothamBold
toggleButton.BorderSizePixel = 0
toggleButton.Parent = mainFrame

-- Button corner
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = toggleButton

-- Variables
local isBlocking = false
local originalNamecall = nil
local blockedCount = 0

-- Function to update blocked counter
local function updateBlockedCounter(method, key)
    blockedCount = blockedCount + 1
    blockedLabel.Text = "Blocked Saves: " .. blockedCount
    lastBlockedLabel.Text = "Last: " .. method .. " (" .. tostring(key):sub(1, 20) .. ")"
    
    -- Flash effect
    blockedLabel.TextColor3 = Color3.fromRGB(255, 255, 100)
    wait(0.1)
    blockedLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
end

-- Function to block saves using hookfunction
local function blockSaves()
    if isBlocking then return end
    
    -- Get the metatable
    local mt = getrawmetatable(game)
    local backup = mt.__namecall
    
    -- Make it writable
    setreadonly(mt, false)
    
    -- Hook the __namecall metamethod
    originalNamecall = hookfunction(mt.__namecall, function(self, ...)
        local method = getnamecallmethod()
        local args = {...}
        
        -- Check if it's a DataStore operation
        if method == "SetAsync" or method == "UpdateAsync" or method == "RemoveAsync" or method == "IncrementAsync" then
            -- Check if self is a DataStore
            local success, result = pcall(function()
                return tostring(self):match("DataStore")
            end)
            
            if success and result then
                -- Update GUI counter
                spawn(function()
                    updateBlockedCounter(method, args[1])
                end)
                
                -- Print to console
                print("üõ°Ô∏è [BLOCKED] " .. method .. " | Key: " .. tostring(args[1] or "unknown"))
                
                -- Return nil to block the operation
                return nil
            end
        end
        
        -- Call original function for everything else
        return originalNamecall(self, ...)
    end)
    
    setreadonly(mt, true)
    
    isBlocking = true
    blockedCount = 0
    statusLabel.Text = "Status: Blocking All Saves ‚úì"
    statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    toggleButton.Text = "Unblock Saves"
    toggleButton.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
    blockedLabel.Visible = true
    lastBlockedLabel.Visible = true
    
    print("üõ°Ô∏è [DataStore Blocker] Save blocking is now ACTIVE")
    print("   Watching for DataStore saves...")
end

-- Function to unblock saves
local function unblockSaves()
    if not isBlocking then return end
    
    if originalNamecall then
        local mt = getrawmetatable(game)
        setreadonly(mt, false)
        mt.__namecall = originalNamecall
        setreadonly(mt, true)
    end
    
    isBlocking = false
    statusLabel.Text = "Status: Not Active"
    statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    toggleButton.Text = "Block Saves"
    toggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
    blockedLabel.Visible = false
    lastBlockedLabel.Visible = false
    
    print("‚ùå [DataStore Blocker] Save blocking is now DISABLED")
    print("   Total saves blocked: " .. blockedCount)
end

-- Button click handler
toggleButton.MouseButton1Click:Connect(function()
    if isBlocking then
        unblockSaves()
    else
        blockSaves()
    end
end)

print("‚úÖ [DataStore Blocker] GUI Loaded Successfully")
print("üì± [DataStore Blocker] Delta Android Compatible")
print("‚ÑπÔ∏è  [DataStore Blocker] Open console (F9) to see blocked saves")
print("‚ÑπÔ∏è  [DataStore Blocker] Click 'Block Saves' then leave normally")
