-- Gingerbread Teleporter GUI Script
-- Place this in StarterGui or StarterPlayerScripts

local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "GingerbreadTeleporterGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Create main frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 250, 0, 150)
mainFrame.Position = UDim2.new(0.5, -125, 0.5, -75)
mainFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
mainFrame.BorderSizePixel = 2
mainFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
mainFrame.Parent = screenGui

-- Add UICorner to main frame
local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 8)
frameCorner.Parent = mainFrame

-- Create title label
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 35)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
titleLabel.BorderSizePixel = 0
titleLabel.Text = "Gingerbread Tools"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextSize = 18
titleLabel.Font = Enum.Font.GothamBold
titleLabel.Parent = mainFrame

-- Add UICorner to title
local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 8)
titleCorner.Parent = titleLabel

-- Create teleport button
local teleportButton = Instance.new("TextButton")
teleportButton.Size = UDim2.new(0, 220, 0, 40)
teleportButton.Position = UDim2.new(0.5, -110, 0, 45)
teleportButton.BackgroundColor3 = Color3.fromRGB(0, 170, 127)
teleportButton.BorderSizePixel = 0
teleportButton.Text = "Teleport to Gingerbreads"
teleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
teleportButton.TextSize = 14
teleportButton.Font = Enum.Font.GothamBold
teleportButton.Parent = mainFrame

-- Add UICorner to teleport button
local teleportCorner = Instance.new("UICorner")
teleportCorner.CornerRadius = UDim.new(0, 6)
teleportCorner.Parent = teleportButton

-- Create destroy penguin button
local penguinButton = Instance.new("TextButton")
penguinButton.Size = UDim2.new(0, 220, 0, 40)
penguinButton.Position = UDim2.new(0.5, -110, 0, 95)
penguinButton.BackgroundColor3 = Color3.fromRGB(255, 85, 85)
penguinButton.BorderSizePixel = 0
penguinButton.Text = "Destroy All Penguins"
penguinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
penguinButton.TextSize = 14
penguinButton.Font = Enum.Font.GothamBold
penguinButton.Parent = mainFrame

-- Add UICorner to penguin button
local penguinCorner = Instance.new("UICorner")
penguinCorner.CornerRadius = UDim.new(0, 6)
penguinCorner.Parent = penguinButton

-- Make frame draggable
local dragging = false
local dragInput, mousePos, framePos

mainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		mousePos = input.Position
		framePos = mainFrame.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

mainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - mousePos
		mainFrame.Position = UDim2.new(
			framePos.X.Scale,
			framePos.X.Offset + delta.X,
			framePos.Y.Scale,
			framePos.Y.Offset + delta.Y
		)
	end
end)

-- Teleport functionality
local isTeleporting = false

teleportButton.MouseButton1Click:Connect(function()
	if isTeleporting then
		-- Stop teleporting
		isTeleporting = false
		teleportButton.Text = "Teleport to Gingerbreads"
		teleportButton.BackgroundColor3 = Color3.fromRGB(0, 170, 127)
		print("Stopped teleporting!")
		return
	end
	
	local character = player.Character
	if not character then
		warn("Character not found!")
		return
	end
	
	local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
	if not humanoidRootPart then
		warn("HumanoidRootPart not found!")
		return
	end
	
	isTeleporting = true
	teleportButton.Text = "Stop Teleporting"
	teleportButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
	
	spawn(function()
		while isTeleporting do
			-- Find the path to gingerbreads
			local interiors = workspace:FindFirstChild("Interiors")
			if not interiors then
				warn("Interiors not found in workspace!")
				wait(2)
				continue
			end
			
			local mainMap = interiors:FindFirstChild("MainMap!Christmas")
			if not mainMap then
				warn("MainMap!Christmas not found!")
				wait(2)
				continue
			end
			
			-- Find all GingerbreadRig instances
			local gingerbreads = {}
			for _, obj in pairs(mainMap:GetDescendants()) do
				if obj.Name == "GingerbreadRig" and obj:IsA("Model") then
					table.insert(gingerbreads, obj)
				end
			end
			
			if #gingerbreads == 0 then
				print("No GingerbreadRig instances found! Waiting for new ones...")
				wait(2)
				continue
			end
			
			print("Found " .. #gingerbreads .. " gingerbread(s), starting teleport cycle...")
			
			-- Teleport to each gingerbread
			for i, gingerbread in ipairs(gingerbreads) do
				if not isTeleporting then
					break
				end
				
				-- Update character reference in case player respawned
				character = player.Character
				if character then
					humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
				end
				
				if not humanoidRootPart then
					warn("HumanoidRootPart lost, waiting...")
					wait(2)
					break
				end
				
				local primaryPart = gingerbread.PrimaryPart or gingerbread:FindFirstChildWhichIsA("BasePart")
				if primaryPart then
					humanoidRootPart.CFrame = primaryPart.CFrame + Vector3.new(0, 3, 0)
					print("Teleported to gingerbread " .. i .. " of " .. #gingerbreads)
					
					wait(1) -- 1 second delay between teleports
				end
			end
			
			-- After teleporting to all, wait 2 seconds before checking again
			if isTeleporting then
				print("Cycle complete! Checking for new gingerbreads in 2 seconds...")
				wait(2)
			end
		end
		
		print("Teleporting stopped!")
	end)
end)

-- Destroy penguin functionality
penguinButton.MouseButton1Click:Connect(function()
	local count = 0
	for _, obj in pairs(workspace:GetDescendants()) do
		if obj.Name == "Penguin" then
			obj:Destroy()
			count = count + 1
		end
	end
	print("Destroyed " .. count .. " penguin(s)!")
	
	-- Visual feedback
	penguinButton.Text = "Destroyed " .. count .. " Penguins!"
	wait(2)
	penguinButton.Text = "Destroy All Penguins"
end)
